{% extends 'base.html' %}

{% load staticfiles %}

{% load bootstrap_tags %}

{% block page_title %}Registration Page{% endblock %}



{% block page_heading %} {{ profile_type }} Registration{% endblock %}

{% block js %}
{% if profile_type == 'ARTIST' %}

    <script type="text/javascript" src="https://js.stripe.com/v3/"></script>
    <script type="text/javascript">
        //<![CDATA[
            var stripe = Stripe('{{ publishable }}');
        //]]>
    </script>

    <script type="text/javascript">
        $(document).ready(function(){

            $('input:radio[name="profile_type"]').click(function(){
                if($(this).val() == 'ARTIST'){
                    $("#payment-info").show('slow');
                    $(this).attr('status', 'selected');
                    $('#id_profile_type_2').removeAttr('status', 'selected');
                }else{
                    $("#payment-info").hide('slow');
                    $(this).attr('status', 'selected');
                    $('#id_profile_type_1').removeAttr('status', 'selected');
                    
                }
            });
        });
    </script>

    <script type="text/javascript" src="{% static 'js/stripe.js' %}"></script>

{% endif %}
{% endblock %}

{% block page_content %}

<form method = 'POST' id='payment-form'>

    {% csrf_token %}
    
    <input type="hidden" value="{{ profile_type }}" name="profile_type">

    {{ reg_form.errors }}
    {{ reg_form | as_bootstrap}}
    
    {% if profile_type == 'ARTIST' %}

        {% include 'payment_form.html' %}

    {% endif %}

    <button class="btn btn-primary" type='submit'>Register</button>

</form>

<p>Already registered? You can proceed to <a href="{% url 'login' %}">Login</a> page</p>

{% endblock %}